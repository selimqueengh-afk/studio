
{
  "rules": {
    "rules_version": "2",
    "service": "cloud.firestore",
    "match": "/databases/{database}/documents",
    "function isSignedIn()": "return request.auth != null;",
    "function isUser(userId)": "return isSignedIn() && request.auth.uid == userId;",
    "match": "/users/{userId}/{document=**}",
    "allow": "read, write: if isUser(userId);",
    "match": "/friendRequests/{requestId}",
    "allow": "read, delete: if isSignedIn() && (resource.data.from.uid == request.auth.uid || resource.data.to.uid == request.auth.uid);",
    "allow": "create: if isSignedIn() && request.resource.data.from.uid == request.auth.uid;"
  }
}
